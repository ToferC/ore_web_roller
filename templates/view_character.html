{{define "content"}}

{{ $character := . }}
{{ $statistics := $character.Statistics }}
{{ $skills := $character.Skills }}

      <div class="container">
        <hr>
        <div class="row">
          <div class="col-sm-3 col-md-3 col-lg-3">
            <h3>{{ $character.Name }} ({{ $character.PointCost }}pts)</h3>
            <h4>Image</h4>
            <hr>

            {{ if $character.Archetype }}
            <h4>Archetype: {{ $character.Archetype.Type }} ({{ $character.Archetype.Cost }}pts)</h4>
            <h4>Sources</h4>
            {{ range $source := $character.Archetype.Sources }}
              <ul><p>{{ $source }}</p></ul>
            {{ end }}

            <h4>Permissions</h4>
            {{ range $permission := $character.Archetype.Permissions }}
              <ul><p>{{ $permission }}</p></ul>
            {{ end }}

            <h4>Intrinsics</h4>
            {{ range $intrinsic := $character.Archetype.Intrinsics }}
              <ul><p>{{ $intrinsic.Name }}
                {{ if $intrinsic.RequiresInfo }}
                - {{ $intrinsic.Info }}
                {{ end }}
                {{ if $intrinsic.RequiresLevel }}
                   ({{ multiply $intrinsic.Cost $intrinsic.Level }}pts)
                {{ else }}
                  ({{ $intrinsic.Cost }}pts)
                {{ end }}
            </p></ul>
            {{ end }}

            <hr>
            {{ end }}

            <h4>Description</h4>
            {{ $character.Description }}

              <h4>Base Will: {{ .BaseWill }}</h4>
              <h4>Willpower: {{ .Willpower }}</h4>
              <a class="btn btn-primary" href="/modify/{{ .ID }}">Modify</a>
              <a class="btn btn-danger" href="/delete/{{ .ID }}">Delete</a></h4>
          </div>
      <div class="col-sm-3 col-md-3 col-lg-3">
        <h3>Skills</h3>
        {{ range $stat := $statistics }}
        <h4>{{ . }} <a href={{ statRoll $character $stat 1 }}>Roll</a>
          <a class="btn btn-secondary" href="/add_skill/{{ $character.ID }}/{{ $stat.Name }}">Add Skill</a>
          <a class="btn btn-secondary" href="/add_hyperstat/{{ $character.ID }}/{{ $stat.Name }}">Add HyperStat</a></h4>
        {{ range $skill := $skills }}
        {{ if or $skill.Dice.Normal $skill.Dice.Hard $skill.Dice.Wiggle }}
        {{ if eq $skill.LinkStat.Name $stat.Name}}
          <ul>{{ . }} <a href={{ skillRoll $character $skill $stat 1 }}>Roll</a>
            <a class="btn btn-secondary" href="/add_hyperskill/{{ $character.ID }}/{{ $skill.Name }}">Add HyperSkill</a></h4>
          </ul>
          {{ end }}
        {{ end }}
        {{end}}
      {{ end }}
      </div>

      <div class="col-sm-3 col-md-3 col-lg-3">
        <h3>Powers</h3>

        {{ range $stat := $statistics }}
          {{ if $stat.HyperStat }}
          <div class="card-body">
            <strong>{{ $stat.HyperStat }}</strong> <a type="btn" href="/modify_hyperstat/{{ $character.ID }}/{{ $stat.Name }}">Modify</a>
          <a type="btn btn-danger" href="/delete_hyperstat/{{ $character.ID}}/{{ $stat.Name }}">Delete</a></p>
            {{ range $quality := $stat.HyperStat.Qualities }}
              <p>{{ $quality }}</p>
          {{ end }}
          <i>Effect: {{ $stat.HyperStat.Effect }}</i>
            <hr>
          </div>
          {{ end }}
        {{ end }}

        {{ range $skill := .Skills }}
        {{ if $skill.HyperSkill }}
        <div class="card-body">
          <strong>{{ $skill.HyperSkill }}</strong> <a type="btn" href="/modify_hyperskill/{{ $character.ID }}/{{ $skill.Name }}">Modify</a>
          <a type="btn btn-danger" href="/delete_hyperskill/{{ $character.ID}}/{{ $skill.Name }}">Delete</a></p>
          {{ range $quality := $skill.HyperSkill.Qualities }}
          <p>{{ $quality }}</p>
          {{ end }}
          <i>Effect: {{ $skill.HyperSkill.Effect }}</i>
          <hr>
        </div>
        {{ end }}
        {{ end }}

        {{ range $power := .Powers }}
        <div class="card-body">
          <strong>{{ $power }}</strong> <a type="btn" href="/modify_power/{{ $character.ID}}/{{ $power.Slug}}">Modify</a>
        <a type="btn btn-danger" href="/delete_power/{{ $character.ID}}/{{ $power.Slug }}">Delete</a></p>
          {{ range $quality := $power.Qualities }}
            <p>{{ $quality }} <a href={{ qualityRoll $character $power $quality 1 }}>Roll</a></p>
        {{ end }}
        <i>Effect: {{ $power.Effect }}</i>
          <hr>
        </div>
        {{ end }}
        <hr>
        <a class="btn btn-primary" href="/add_power/{{ $character.ID }}">Add Power</a></p>

      </div>
      <div class="col-sm-3 col-md-3 col-lg-3">
        <h3>Hit Locations</h3>
          {{ range .HitLocations }}
            <p>{{ . }}</p>
          {{ end }}
      </div>
    </div>
      </div>
{{end}}
